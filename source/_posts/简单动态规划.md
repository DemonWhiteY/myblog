---
title: 入门小白必须知道的——C++三原则
date: 2023-04-27 08:32:54
tags: [C++,入门]
categories:
- [C++,入门]
top_img: https://xinzhuobu.com/wp-content/uploads/2022/06/20220611004.jpg
---
##面向对象的那些坑
刚刚接触C++面向对象编程的时候，大家肯能会对一些新的概念感到很陌生，比如说析构函数，拷贝构造函数这些东西，往往会说——“我也不用这些东西呀，要这有什么用呢”，但是，确实啊，不得不说，比如说析构函数，在大一的阶段里基本上是用不到的，有些题要是硬用析构函数可能还会给你抛个异常，但是如果咱们实实力见长以后又会这其实是比较重要的东西，直接关系了你程序的崩溃与否，今天就来从我最近犯的一个错误来和大家聊聊C++中著名的三原则。

先放上让我犯错的代码
{% codeblock lang:cpp %}
    #include<iostream>
    using namespace std;
    template<class T>
    class Array
    {
        private:
        
    public:
        int size;
        T* element ;
        Array(int newsize) :size(newsize){
            element = new T[size];
        }
        ~Array() {
            delete[] element;
            cout << "析构函数调用" << endl;
        };
        Array(const Array& p) {
            size = p.size;
            element = new T[p.size];
            for (int i = 0; i < p.size; i++)
            {
                element[i] = p.element[i];
            }
            cout << "拷贝构造函数调用" << endl;
        }

        Array &operator=(const Array& p)
        {
            cout << "赋值运算符重载调用" << endl;
            size = p.size;
                if (element != NULL)
                {
                    delete[] element;
                    element = NULL;	
            }
                else {
                    element = new T[p.size];
                    for (int i = 0; i < p.size; i++)
                    {
                        element[i] = p.element[i];
                    }
                
                }
        }

        friend istream &operator>>(istream &input,Array& inarray){
            for (int i = 0; i < inarray.size; i++)
            {
                input >> inarray.element[i];
            }
            return input;
        }
        friend ostream &operator<<(ostream & output,Array outarray){
            for (int i = 0; i <outarray.size ; i++)
            {
                output << outarray.element[i] << " ";
            }
            return output;
        }

        void mysort() {

            for (int i = 0; i < size; i++)
            {
                for (int j = i + 1; j < size;j++)
                {
                    if (element[i] > element[j])
                    {
                        T temp;
                        temp = element[i];
                        element[i] = element[j];
                        element[j] = temp;
                    }
                }
            }

            cout << *this;
            cout << endl;
        }

    };

    class student
    {
    public:
        int id;
        string name;
        int grade;

        bool operator >(student& s2)
        {
            return this->grade > s2.grade ? true : false;
        }
        friend ostream& operator <<(ostream& out, student& st)
        {
            out << st.id;
            return out;
            
        }
        friend istream& operator >>(istream& in, student& st)
        {
            in>>st.id>>st.name>>st.grade;
            return in;

        }
    };


    int main()
    {
        
            int num; cin >> num;

            Array<int> intnum(num);
            cin >> intnum;

            Array<double> doublenum(num);
            cin >> doublenum;

            Array<char> charnum(num);
            cin >> charnum;

            Array<student> stnum(num);
            cin >> stnum;

            intnum.mysort();
            
            doublenum.mysort();
            charnum.mysort();
            stnum.mysort();
        
        
        


        return 0;
    }
{% endcodeblock %}


